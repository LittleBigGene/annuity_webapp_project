import unittest
from discount_curve_module import DiscountCurveProvider

class NumberCruncher_test(unittest.TestCase):
    @classmethod
    def setUpClass(cls):
        cls.dc = [0.984281031920234, 0.96880914979796, 0.954410391019473, 0.93969520616569, 0.92446461594948, 0.908688393231543, 0.892630385204329, 0.876121456526178, 0.859338131766428, 0.842377195145383, 0.825925809660083, 0.809398122031756, 0.79280633625568, 0.776162495319867, 0.75947847091866, 0.744208213225815, 0.729045444085094, 0.713993415771664, 0.699055269651177, 0.684234036436185, 0.671184739082859, 0.658351967846467, 0.645732444188018, 0.633322933973429, 0.621120246961875, 0.609121236298527, 0.597322798011666, 0.585721870514174, 0.574315434109375, 0.563100510501218, 0.552104585903129, 0.541323383819959, 0.53075271126566, 0.520388457132568, 0.510226590592522, 0.500263159529208, 0.490494289001123, 0.48091617973454, 0.471525106645909, 0.462317417393116, 0.453289530955022, 0.444437936238747, 0.435759190714148, 0.427249919074966, 0.418906811926108, 0.410726624496576, 0.402706175377516, 0.394842345284919, 0.387132075846482, 0.379572368412155, 0.372160282887915, 0.36489293659232, 0.357767503135381, 0.35078121131934, 0.343931344060899, 0.337215237334505, 0.330630279136267, 0.324173908468104, 0.317843614341732, 0.311636934802097, 0.305551455969885, 0.299584811102718, 0.293734679674696, 0.287998786473903, 0.282374900717541, 0.276860835184339, 0.271454445363912, 0.266153628622722, 0.26095632338633, 0.255860508337616, 0.250864201630657, 0.245965460119954, 0.241162378604709, 0.236453089087864, 0.231835760049606, 0.227308595735056, 0.222869835455873, 0.218517752905495, 0.214250655487747, 0.210066883658562, 0.205964810280563, 0.201942839990234, 0.197999408577465, 0.194132982377201, 0.190342057672974, 0.186625160112086, 0.182980844132204, 0.179407692399166, 0.175904315255745, 0.172469350181199, 0.169101461261358, 0.165799338669067, 0.162561698154774, 0.159387280547061, 0.156274851262936, 0.153223199827679, 0.150231139404073, 0.14729750633082, 0.144421159669975, 0.141600980763218, 0.138835872796788, 0.136124760374914, 0.133466589101577, 0.130860325170438, 0.128304954962774, 0.125799484653262, 0.123342939823469, 0.12093436508288, 0.118572823697337, 0.116257397224721, 0.113987185157757, 0.111761304573796, 0.109578889791427, 0.107439092033801, 0.105341079098527, 0.103284035034017, 0.101267159822149, 0.0992896690671222, 0.0973507936903986, 0.0954497796315925]
        cls.tenors = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 15, 20, 30]
        cls.rates = [0.01597, 0.01597, 0.01568, 0.015675, 0.01583, 0.016075, 0.016335, 0.01663, 0.01693, 0.017225, 0.01834, 0.018925, 0.019125]
        cls.dc_provider = DiscountCurveProvider(cls.tenors, cls.rates, len(cls.dc) - cls.tenors[-1])

    def test_bootstrap(self):
        self.assertAlmostEqual(sum(self.dc), sum(self.dc_provider.bootstrap()), 8)

if __name__ == '__main__':
    unittest.main()